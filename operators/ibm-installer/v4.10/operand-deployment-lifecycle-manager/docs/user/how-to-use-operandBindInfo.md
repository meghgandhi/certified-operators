<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [How to use OperandBindInfo](#how-to-use-operandbindinfo)
  - [OperandBindInfo Overview](#operandbindinfo-overview)
  - [Example to use OperandBindInfo](#example-to-use-operandbindinfo)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# How to use OperandBindInfo

OperandBindInfo is used to share the secret and/or configmap of service to its requester.
ODLM will copy the secret and/or configmap to the namespace of the OperandRequest CR.

OperandBindInfo makes ODLM can support creating an operator service in one namespace and creating its dependency operator services in another namespace and get the required secret and/or configmap from that namespace.

## OperandBindInfo Overview

[OperandBindInfo design](../design/operand-deployment-lifecycle-manager.md#operandbindinfo-spec)

## Example to use OperandBindInfo

1. Take an example operator `Bar` as an example. the operator `Bar` needs to get access to the service generated by operator `Foo`. Thus operator `Foo` needs to share the API token with operator `Bar`.

    operator `Bar` creates an `OperandRequest` to create operator `Foo` in another namespace .

    ```yaml
    apiVersion: operator.ibm.com/v1alpha1
    kind: OperandRequest
    metadata:
      name: bar
      namespace: bar-namespace
    spec:
      requests:
      - registry: foo
        registryNamespace: foo-namespace
        operands:
        - name: foo
    ```

2.  Operator `Foo` creates an `OperandBindInfo` in the `foo-namespace` namespace to share its secret with operator `Bar`.

    ```yaml
    apiVersion: operator.ibm.com/v1alpha1
    kind: OperandBindInfo
    metadata:
      name: foo
      namespace: foo-namespace
    spec:
      operand: foo
      registry: foo
      description: "Binding information that should be accessible to foo adopters"
      bindings:
      - scope: public
        secret: fooToken
    ```

    When ODLM reconcile `OperandRequest`, it will find the `OperandBindInfo` in the namespace set in the corresponding `OperandRegistry` and add a `requestNamespace` list in the `OperandBindInfo` status.

    ```yaml
    apiVersion: operator.ibm.com/v1alpha1
    kind: OperandBindInfo
    metadata:
      name: foo
      namespace: foo-namespace
    spec:
      operand: foo
      registry: foo
      description: "Binding information that should be accessible to foo adopters"
      bindings:
      - scope: public
        secret: fooToken
    status:
      requestNamespaces:
      - bar-namespace <--- the namespace of OperandRequest
    ```

    Then when ODLM reconciles `OperandBindInfo`, it will deliver public `secret` and/or `configmap` to the `bar-namespace` namespace. If the operator `Foo` is required by multi-operators, their namespaces will be appended into the requestNamespaces and the `secret` and/or `configmap` can be delivered to these namespaces.
